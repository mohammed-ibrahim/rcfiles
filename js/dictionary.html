<html>
    <body>

        <!-- Section: Input -->
        <div id="input_div" class="centerdiv">
            <p>
                <textarea id="primary_input_text" name="Text" rows="15" cols="36">input_key - input_value</textarea>
                <br/>
                <br/>
                <input type="button" class="button" name="Button" value="Submit" onclick="onButtonClick()" />
            </p>
        </div>

        <!-- Section: Walkthrough -->
        <div hidden id="walkthrough_div" class="centerdiv">
            <p style="font-size:60" id="walkthrough_key" onclick="showMeaningBox()">Key</p>
            <p style="font-size:60" id="walkthrough_value">Value</p>
            <br/>
            <input type="checkbox" id="walkthrough_show_meaning" checked="true"/><label onclick="toggleMeaningBox()">Show Meaning</label>
            <br/>
            <br/>
            <input type="button" class="button" name="Button" value="Submit" onclick="onButtonClick()" />
        </div>

        <!-- Section: MCQ -->
        <div hidden id="mcq_div" class="centerdiv">

            <p style="font-size:60" id="mcq_question">This is default question.</p>
            <input id="qid_holder" type="hidden" value="dontknow">
            <font size="+3">
            <ul class="answers">
                <input type="radio" name="mcq_radio_button" value="a" id="mcq_a"><label onclick="selA()" id="label_for_mcq_a">Answer 1</label><br/>
                <input type="radio" name="mcq_radio_button" value="b" id="mcq_b"><label onclick="selB()" id="label_for_mcq_b">Answer 2</label><br/>
                <input type="radio" name="mcq_radio_button" value="c" id="mcq_c"><label onclick="selC()" id="label_for_mcq_c">Answer 3</label><br/>
                <input type="radio" name="mcq_radio_button" value="d" id="mcq_d"><label onclick="selD()" id="label_for_mcq_d">Answer 4</label><br/>
            </ul>
            </font>
            <input type="button" class="button" name="Button" value="Submit" onclick="onButtonClick()" />
        </div>

        <!-- Section: MAT -->
        <div hidden id="mat_div" class="centerdiv">
            <font size="+7"><p>Match the following</p></font>
            <table style="width:100%" class="bigfont" border="1">
                <tr>
                    <th>A</th>
                    <th>A &gt B</th>
                    <th>B</th>
                    <th>Bi</th>
                </tr>
                <!-- ********************************** Row Start ***************************************  -->
                <tr>
                    <td>
                        <p style="font-size:45;text-align: center" id="mat_lhs_label_a" value="default_value_lhs">Label_lHS</p>
                    </td>
                    <td align="center">
                        <select id="mat_lhs_select_a" style="font-size: 20px;">
                            <option value="mat_rhs_label_a">A</option>
                            <option value="mat_rhs_label_b">B</option>
                            <option value="mat_rhs_label_c">C</option>
                            <option value="mat_rhs_label_d">D</option>
                            <option value="mat_rhs_label_e">E</option>
                        </select>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center" id="mat_rhs_label_a" value="default_value_rhs">Label_RHS</p>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center">(A)</p>
                    </td>
                </tr>

                <!-- ********************************** Row Start ***************************************  -->
                <tr>
                    <td>
                        <p style="font-size:45;text-align: center" id="mat_lhs_label_b" value="default_value_lhs">Label_lHS</p>
                    </td>
                    <td align="center">
                        <select id="mat_lhs_select_b" style="font-size: 20px;">
                            <option value="mat_rhs_label_a">A</option>
                            <option value="mat_rhs_label_b">B</option>
                            <option value="mat_rhs_label_c">C</option>
                            <option value="mat_rhs_label_d">D</option>
                            <option value="mat_rhs_label_e">E</option>
                        </select>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center" id="mat_rhs_label_b" value="default_value_rhs">Label_RHS</p>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center">(B)</p>
                    </td>
                </tr>

                <!-- ********************************** Row Start ***************************************  -->
                <tr>
                    <td>
                        <p style="font-size:45;text-align: center" id="mat_lhs_label_c" value="default_value_lhs">Label_lHS</p>
                    </td>
                    <td align="center">
                        <select id="mat_lhs_select_c" style="font-size: 20px;">
                            <option value="mat_rhs_label_a">A</option>
                            <option value="mat_rhs_label_b">B</option>
                            <option value="mat_rhs_label_c">C</option>
                            <option value="mat_rhs_label_d">D</option>
                            <option value="mat_rhs_label_e">E</option>
                        </select>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center" id="mat_rhs_label_c" value="default_value_rhs">Label_RHS</p>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center">(C)</p>
                    </td>
                </tr>

                <!-- ********************************** Row Start ***************************************  -->
                <tr>
                    <td>
                        <p style="font-size:45;text-align: center" id="mat_lhs_label_d" value="default_value_lhs">Label_lHS</p>
                    </td>
                    <td align="center">
                        <select id="mat_lhs_select_d" style="font-size: 20px;">
                            <option value="mat_rhs_label_a">A</option>
                            <option value="mat_rhs_label_b">B</option>
                            <option value="mat_rhs_label_c">C</option>
                            <option value="mat_rhs_label_d">D</option>
                            <option value="mat_rhs_label_e">E</option>
                        </select>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center" id="mat_rhs_label_d" value="default_value_rhs">Label_RHS</p>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center">(D)</p>
                    </td>
                </tr>

                <!-- ********************************** Row Start ***************************************  -->
                <tr>
                    <td>
                        <p style="font-size:45;text-align: center" id="mat_lhs_label_e" value="default_value_lhs">Label_lHS</p>
                    </td>
                    <td align="center">
                        <select id="mat_lhs_select_e" style="font-size: 20px;">
                            <option value="mat_rhs_label_a">A</option>
                            <option value="mat_rhs_label_b">B</option>
                            <option value="mat_rhs_label_c">C</option>
                            <option value="mat_rhs_label_d">D</option>
                            <option value="mat_rhs_label_e">E</option>
                        </select>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center" id="mat_rhs_label_e" value="default_value_rhs">Label_RHS</p>
                    </td>
                    <td>
                        <p style="font-size: 30;text-align: center">(E)</p>
                    </td>
                </tr>

            </table>
            <br/>
            <br/>
            <input type="button" class="button" name="Button" value="Submit" onclick="onButtonClick()" />
        </div>

        <br/>
        <div class="statusbarclass">
            <label id="status_bar" align="center"></label>
        </div>

        <script>
            var globalPrimaryDictionary = new Array();
            //var dictMap = {};
            var globalCounterIndex = 0;
            var globalItemsPracticed = -1;
            var pageState = "not_started";
            var differential = 2;
            var numWalkthrough = 20 - differential;
            var numMcq = 20 - differential;
            var numMat = 10 - differential;
            var loaded = false;

            <!-- Router -->

            function onButtonClick() {

                if (loaded && (globalPrimaryDictionary.length <= 1)) {
                    alert("All items are done!");
                    return;
                }

                if (pageState == "not_started") {
                    if (!load()) {

                        return;
                    }


                    loaded = true;
                    pageState = "walkthrough";
                    globalCounterIndex = 0;
                    if (!nextWalkthrough()) {

                        return;
                    }

                    /*
                    if (!nextMat()) {
                        return;
                    }
                    pageState = "mat";
                    globalCounterIndex = -1;
                    */

                    //TODO: del below two lines
                    //pageState = "mat";
                    //response = nextMat();

                } else if (pageState == "walkthrough") {
                    if (!nextWalkthrough()) {

                        return;
                    }

                    if (globalCounterIndex > numWalkthrough) {
                        globalCounterIndex = -1;
                        pageState = "mcq";
                    }

                } else if (pageState == "mcq") {
                    if (!nextMcq()) {

                        return;
                    }

                    if (globalCounterIndex > numMcq) {
                        globalCounterIndex = -1;
                        pageState = "mat";
                    }

                } else if (pageState == "mat") {
                    if (!nextMat()) {

                        return;
                    }

                    if (globalCounterIndex > numMat) {
                        globalCounterIndex = -1;
                        pageState = "walkthrough";
                        numWalkthrough = 5 - differential;
                    }

                }

                globalCounterIndex = globalCounterIndex + 1;
                var statusText = "gci: " + globalCounterIndex + " pst: " + pageState + " dl: " + globalPrimaryDictionary.length + " practiced: " + globalItemsPracticed;
                document.getElementById("status_bar").innerHTML = statusText;
            }

            <!-- Services -->

            function assertMatSelection(word) {
                
                var lhsQid = document.getElementById("mat_lhs_label_" + word).value;
                var valueOfSelectedRhs = document.getElementById("mat_lhs_select_" + word).value;

                if (!valueOfSelectedRhs) {

                    alert("please make a selection");
                    return false;
                }

                var rhsQid = document.getElementById(valueOfSelectedRhs).value;

                if (lhsQid !== rhsQid) {
                    alert("Wrong answer!!");
                    return false;
                }

                return lhsQid;
            }

            function nextMat() {

                var walkthroughDiv = document.getElementById("walkthrough_div");
                var mcqDiv = document.getElementById("mcq_div");
                var matDiv = document.getElementById("mat_div");

                walkthroughDiv.style.display = "none";
                mcqDiv.style.display = "none";
                matDiv.style.display = "block";

                //if not first time then.
                if (globalCounterIndex > 0) {

                    var selectionItems = ["a", "b", "c", "d", "e"];

                    var collectedQids = [];

                    for (i=0; i<selectionItems.length; i++) {

                        var value = assertMatSelection(selectionItems[i]);
                        if (value === false) {
                            return;
                        } else {
                            collectedQids.push(value);
                        }
                    }

                    deleteItems(collectedQids);

                }

                globalItemsPracticed = globalItemsPracticed + 5;
                var r1 = getRandomInt(0, globalPrimaryDictionary.length);
                var r2 = getRandomInt(0, globalPrimaryDictionary.length);
                var r3 = getRandomInt(0, globalPrimaryDictionary.length);
                var r4 = getRandomInt(0, globalPrimaryDictionary.length);
                var r5 = getRandomInt(0, globalPrimaryDictionary.length);

                document.getElementById("mat_lhs_label_a").innerHTML = globalPrimaryDictionary[r1]["key"];
                document.getElementById("mat_lhs_label_a").value = globalPrimaryDictionary[r1]["qid"];

                document.getElementById("mat_lhs_label_b").innerHTML = globalPrimaryDictionary[r2]["key"];
                document.getElementById("mat_lhs_label_b").value = globalPrimaryDictionary[r2]["qid"];

                document.getElementById("mat_lhs_label_c").innerHTML = globalPrimaryDictionary[r3]["key"];
                document.getElementById("mat_lhs_label_c").value = globalPrimaryDictionary[r3]["qid"];

                document.getElementById("mat_lhs_label_d").innerHTML = globalPrimaryDictionary[r4]["key"];
                document.getElementById("mat_lhs_label_d").value = globalPrimaryDictionary[r4]["qid"];

                document.getElementById("mat_lhs_label_e").innerHTML = globalPrimaryDictionary[r5]["key"];
                document.getElementById("mat_lhs_label_e").value = globalPrimaryDictionary[r5]["qid"];

                //Reset the select boxes
                document.getElementById("mat_lhs_select_a").value = "mat_rhs_label_a";
                document.getElementById("mat_lhs_select_b").value = "mat_rhs_label_a";
                document.getElementById("mat_lhs_select_c").value = "mat_rhs_label_a";
                document.getElementById("mat_lhs_select_d").value = "mat_rhs_label_a";
                document.getElementById("mat_lhs_select_e").value = "mat_rhs_label_a";

                var originalState = [r1, r2, r3, r4, r5];
                var shuffeledArray = shuffle(originalState);

                document.getElementById("mat_rhs_label_a").innerHTML = globalPrimaryDictionary[shuffeledArray[0]]["value"];
                document.getElementById("mat_rhs_label_a").value = globalPrimaryDictionary[shuffeledArray[0]]["qid"];

                document.getElementById("mat_rhs_label_b").innerHTML = globalPrimaryDictionary[shuffeledArray[1]]["value"];
                document.getElementById("mat_rhs_label_b").value = globalPrimaryDictionary[shuffeledArray[1]]["qid"];

                document.getElementById("mat_rhs_label_c").innerHTML = globalPrimaryDictionary[shuffeledArray[2]]["value"];
                document.getElementById("mat_rhs_label_c").value = globalPrimaryDictionary[shuffeledArray[2]]["qid"];

                document.getElementById("mat_rhs_label_d").innerHTML = globalPrimaryDictionary[shuffeledArray[3]]["value"];
                document.getElementById("mat_rhs_label_d").value = globalPrimaryDictionary[shuffeledArray[3]]["qid"];

                document.getElementById("mat_rhs_label_e").innerHTML = globalPrimaryDictionary[shuffeledArray[4]]["value"];
                document.getElementById("mat_rhs_label_e").value = globalPrimaryDictionary[shuffeledArray[4]]["qid"];

                return true;
            }

            function nextMcq() {

                var walkthroughDiv = document.getElementById("walkthrough_div");
                var mcqDiv = document.getElementById("mcq_div");
                var matDiv = document.getElementById("mat_div");

                walkthroughDiv.style.display = "none";
                mcqDiv.style.display = "block";
                matDiv.style.display = "none";

                //globalCounterIndex will be zero for the first time.
                //So need not evaluate on first time.
                if (globalCounterIndex > 0) {
                    var checkedValueQid;

                    if (document.getElementById("mcq_a").checked) {

                        checkedValueQid = document.getElementById("mcq_a").value;
                    } else if (document.getElementById("mcq_b").checked) {

                        checkedValueQid = document.getElementById("mcq_b").value;
                    } else if (document.getElementById("mcq_c").checked) {

                        checkedValueQid = document.getElementById("mcq_c").value;
                    } else if (document.getElementById("mcq_d").checked) {

                        checkedValueQid = document.getElementById("mcq_d").value;
                    }

                    if (checkedValueQid) {
                        var hiddenQid = document.getElementById("qid_holder").value
                        if (hiddenQid !== checkedValueQid) {
                            alert("wrong answer");
                            return false;
                        }
                    } else {
                        alert("Please select one answer");
                        return false;
                    }

                    //At this stage the answer is correct!
                    //So delete the question.
                    var itemsToDelete = [hiddenQid];
                    console.log("Requesting to delete: " + itemsToDelete);
                    deleteItems(itemsToDelete);
                }

                globalItemsPracticed = globalItemsPracticed + 1;

                document.getElementById("mcq_a").checked = false;
                document.getElementById("mcq_b").checked = false;
                document.getElementById("mcq_c").checked = false;
                document.getElementById("mcq_d").checked = false;

                var r1 = getRandomInt(0, globalPrimaryDictionary.length);
                var r2 = getRandomInt(0, globalPrimaryDictionary.length);
                var r3 = getRandomInt(0, globalPrimaryDictionary.length);
                var r4 = getRandomInt(0, globalPrimaryDictionary.length);

                var mcqKey = globalPrimaryDictionary[r1]["key"];
                var mcqValue = globalPrimaryDictionary[r1]["value"];
                document.getElementById("qid_holder").value = globalPrimaryDictionary[r1]["qid"];
                document.getElementById("mcq_question").innerHTML = mcqKey;

                var originalState = [r1, r2, r3, r4];
                var shuffeledArray = shuffle(originalState);
                document.getElementById("label_for_mcq_a").innerHTML = globalPrimaryDictionary[shuffeledArray[0]]["value"];
                document.getElementById("label_for_mcq_b").innerHTML = globalPrimaryDictionary[shuffeledArray[1]]["value"];
                document.getElementById("label_for_mcq_c").innerHTML = globalPrimaryDictionary[shuffeledArray[2]]["value"];
                document.getElementById("label_for_mcq_d").innerHTML = globalPrimaryDictionary[shuffeledArray[3]]["value"];

                document.getElementById("mcq_a").value = globalPrimaryDictionary[shuffeledArray[0]]["qid"];
                document.getElementById("mcq_b").value = globalPrimaryDictionary[shuffeledArray[1]]["qid"];
                document.getElementById("mcq_c").value = globalPrimaryDictionary[shuffeledArray[2]]["qid"];
                document.getElementById("mcq_d").value = globalPrimaryDictionary[shuffeledArray[3]]["qid"];

                return true;
            }

            function nextWalkthrough() {

                if (!document.getElementById("walkthrough_show_meaning").checked) {
                    document.getElementById("walkthrough_value").style.display = "none";
                }

                var walkthroughDiv = document.getElementById("walkthrough_div");
                var mcqDiv = document.getElementById("mcq_div");
                var matDiv = document.getElementById("mat_div");

                walkthroughDiv.style.display = "block";
                mcqDiv.style.display = "none";
                matDiv.style.display = "none";

                if (globalCounterIndex >= globalPrimaryDictionary.length) {
                    alert("Dictionary items are done!");
                    return false;
                }

                var obj = globalPrimaryDictionary[globalCounterIndex];
                console.log("globalCounterIndex is: " + globalCounterIndex);
                console.log("loaded object is: " + obj);
                var key = obj["key"];
                var value = obj["value"];

                document.getElementById("walkthrough_key").innerHTML = key;
                document.getElementById("walkthrough_value").innerHTML = value;

                globalItemsPracticed = globalItemsPracticed + 1;
                return true;
            }

            function load() {
                var textBox = document.getElementById("primary_input_text");

                if (!textBox.value) {
                    alert("Empty input");
                    return false;
                }

                var data = textBox.value
                var sdata = data.split("\n");

                for (line in sdata) {
                    linedata = sdata[line];
                    console.log("line: " + linedata);
                    var content = linedata.split(" - ");
                    if (content.length == 2) {

                        console.log("content: " + content[0]);
                        console.log("value: " +  content[1]);
                        var qid = guid();
                        var dictObj = {key: content[0], value: content[1], state: "v", qid: qid};
                        globalPrimaryDictionary.push(dictObj);
                        //dictMap[qid] = dictObj;
                    } else {
                        console.error("Entry format error: " + linedata);
                    }
                }

                console.log("Size of dictionary: " + globalPrimaryDictionary.length);

                /*
                for (di in globalPrimaryDictionary) {
                    var didata = globalPrimaryDictionary[di];
                    console.log(didata["key"]  + " ---------- " + didata["value"]  + " ---------- " + didata["state"]);
                }
                */

                //Hide the textbox
                if (textBox.style.display === "none") {
                    //textBox.style.display = "block";
                } else {
                    textBox.style.display = "none";
                }

                document.getElementById("input_div").style.display = "none";
                return true;
            }

            <!-- Helper Methods -->
            function getRandomInt(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
            }

            function randomArray(length, max) {
                return Array.apply(null, Array(length)).map(function() {
                    return Math.round(Math.random() * max);
                });
            }

            function shuffle(array) {
                var currentIndex = array.length, temporaryValue, randomIndex;

                // While there remain elements to shuffle...
                while (0 !== currentIndex) {

                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                }

                return array;
            }

            function guid() {

                function s4() {
                    return Math.floor((1 + Math.random()) * 0x10000)
                        .toString(16)
                        .substring(1);
                }

                return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
                    s4() + '-' + s4() + s4() + s4();
            }

            function showMeaningBox() {
                document.getElementById("walkthrough_value").style.display = "block";
            }

            function toggleMeaningBox() {
                document.getElementById("walkthrough_show_meaning").checked = !document.getElementById("walkthrough_show_meaning").checked;

                if (document.getElementById("walkthrough_show_meaning").checked) {
                    //Show meaning box.
                    document.getElementById("walkthrough_value").style.display = "block";
                } else {
                    //Hide meaning box.
                    document.getElementById("walkthrough_value").style.display = "none";
                }
            }

            function selA() {
                document.getElementById("mcq_a").checked = true;
            }

            function selB() {
                document.getElementById("mcq_b").checked = true;
            }

            function selC() {
                document.getElementById("mcq_c").checked = true;
            }

            function selD() {
                document.getElementById("mcq_d").checked = true;
            }

            function deleteItems(items) {
                for (i=globalPrimaryDictionary.length - 1; i >= 0;  i--) {
                    var obj = globalPrimaryDictionary[i];
                    var qid = obj["qid"];
                    if (items.includes(qid)) {
                        var deleted = globalPrimaryDictionary.splice(i, 1);
                        console.log("deleted");
                        console.log(deleted);
                    }
                }

                console.log("After deleting size of dictionary is: " + globalPrimaryDictionary.length);
            }

window.onload = function() {
var textBox = document.getElementById("primary_input_text");
textBox.value = `one - 1one and simple
two - 2two and the average text content is this much.
three - 3three ringa ringa roses.
four - 4four ba ba black sheep have you.
five - 5five twinkle twinkle little start.
six - 6six a new page.
seven - 7seven test data.
eight - 8eight on average the eighth.
nine - 9nine small
zero - 0zero`
};

        </script>
        <style>
            .button {
                background-color: #4CAF50; /* Green */
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
            }
            .centerdiv {
                margin: auto;
                width: 80%;
                border: 3px solid green;
                padding: 10px;
                text-align: center;
            }
            .centerdis {
                position: relative;
                width: 300px;
                width: 50%;
                height: 200px;
                height: 80%;
                z-index: 30;
                top: 20%;
                left: 50%;
                margin: -100px 0 0 -150px;
                text-align: center;
            }

            .bigfont {
                font-size: 25px;
                border-collapse: collapse;
                border-bottom: 1px solid #ddd;
            }
            .statusbarclass {
                width: 50%;
                margin: 0 auto; 
                text-align: center;
            }
        </style>
    </body>
<html>
